const expressionEl=document.getElementById("expression");const resultEl=document.getElementById("result");const keys=document.querySelector(".keys");let expr="";function normalise(s){return s.replace(/×/g,"*").replace(/÷/g,"/")}function compute(){try{const v=normalise(expr);if(!v||/[^0-9+\-*/.() ]/.test(v))return;const r=Function('"use strict";return ('+v+')')();if(Number.isFinite(r))resultEl.textContent=r;else resultEl.textContent=""}catch(e){resultEl.textContent=""}}function push(v){expr+=v;expressionEl.textContent=expr;compute()}function del(){expr=expr.slice(0,-1);expressionEl.textContent=expr;compute()}function clearAll(){expr="";expressionEl.textContent="";resultEl.textContent=""}function equals(){compute();if(resultEl.textContent!==""){expr=String(resultEl.textContent);expressionEl.textContent=expr}}keys.addEventListener("click",e=>{const b=e.target.closest("button");if(!b)return;const val=b.getAttribute("data-value");const action=b.getAttribute("data-action");if(action==="clear")clearAll();else if(action==="delete")del();else if(action==="equals")equals();else if(val)push(val)});window.addEventListener("keydown",e=>{const k=e.key;if(/[0-9]/.test(k))push(k);else if(k==="+")push("+ ");else if(k==="-" )push("- ");else if(k==="*")push("×");else if(k==="/")push("÷");else if(k===".")push(".");else if(k==="Enter"||k==="="){e.preventDefault();equals()}else if(k==="Backspace"){del()}else if(k==="Escape"){clearAll()}});
